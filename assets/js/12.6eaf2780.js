(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{396:function(s,t,a){"use strict";a.r(t);var e=a(2),_=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("当我们需要解决项目中的一个bug时，通常一个新的"),t("code",[s._v("PR")]),s._v("会伴随一个"),t("code",[s._v("issue")]),s._v("，本文将介绍仅需通过创建"),t("code",[s._v("PR")]),s._v("时一个操作，关联上"),t("code",[s._v("issue")]),s._v("，然后当"),t("code",[s._v("PR")]),s._v("被同意之后，对应关联的"),t("code",[s._v("issue")]),s._v("也将随之关闭。")]),s._v(" "),t("p",[s._v("同样，我先在示例项目中创建一个"),t("code",[s._v("issue")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_145415.png",alt:"image_20220719_145415"}})]),s._v(" "),t("p",[s._v("这种时候，作为项目维护者，我们可以直接点击"),t("code",[s._v("Development")]),s._v("中的 "),t("code",[s._v("Create a branch")]),s._v(" 创建一个fix分支，这样会自动关联上这个"),t("code",[s._v("issue")]),s._v("，同理，当该fix分支创建的"),t("code",[s._v("PR")]),s._v("被合并之后，"),t("code",[s._v("issue")]),s._v("也会自动关闭。")]),s._v(" "),t("p",[s._v("不过这里不讲此种方案，大家有兴趣可以自行体验一番。")]),s._v(" "),t("p",[s._v("这里讲的是我们更常见的一种操作，在本地编辑器里，基于最新的"),t("code",[s._v("main分支")]),s._v("切出一个"),t("code",[s._v("fix")]),s._v("分支，如下：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout main\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" fix_testbug\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("然后就是在"),t("code",[s._v("fix_testbug")]),s._v("分支上进行对应问题的修复，这块儿不对赘述。")]),s._v(" "),t("p",[s._v("当我们感觉修复没问题了，也进行过自测了，就可以将此临时分支进行提交：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fix: test bug"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --set-upstream origin fix_testbug\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("推到远程之后，我们来到GitHub页面中，此时可以看到GitHub会自动提示一个新的分支可以合并：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_150429.png",alt:"image_20220719_150429"}})]),s._v(" "),t("p",[s._v("可以直接点击"),t("code",[s._v("Compare & pull request")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151051.png",alt:"image_20220719_151051"}})]),s._v(" "),t("p",[s._v("注意右侧"),t("code",[s._v("Development")]),s._v("中的说明，我们可以通过在说明中添加一些"),t("a",{attrs:{href:"https://docs.github.com/cn/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue",target:"_blank",rel:"noopener noreferrer"}},[s._v("关键字"),t("OutboundLink")],1),s._v("，从而对"),t("code",[s._v("issue")]),s._v("进行关联，并触发关闭。当然也可以先创建PR，然后再进行关联也可以：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151313.png",alt:"image_20220719_151313"}})]),s._v(" "),t("p",[s._v("完成关联的PR，可以看到有这样的状态显示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151423.png",alt:"image_20220719_151423"}})]),s._v(" "),t("p",[s._v("这个时候，我们点击到"),t("code",[s._v("#21")]),s._v("号"),t("code",[s._v("issue")]),s._v("中，也可以看到被关联到该"),t("code",[s._v("PR")]),s._v("上了：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151547.png",alt:"image_20220719_151547"}})]),s._v(" "),t("p",[s._v("现在我们将 "),t("code",[s._v("#23")]),s._v(" 号"),t("code",[s._v("PR")]),s._v("进行合并，合并之后可以看到关联的"),t("code",[s._v("issue")]),s._v("也被关闭了，此次关联的临时分支也被删除了：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151825.png",alt:"image_20220719_151825"}})]),s._v(" "),t("p",[s._v("以上就是项目协同中，"),t("code",[s._v("PR")]),s._v("与"),t("code",[s._v("issue")]),s._v("的联动维护。")]),s._v(" "),t("hr"),s._v(" "),t("p",[t("strong",[s._v("另外：")]),s._v(" 这里插一个小点，当我们完成一次PR流程之后，作为项目主维护人，通常会再次切回到main分支，然后将远程被合并到main分支的代码拉到本地：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout main\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这样执行之后，会发现本地代码竟然已经超过远程分支了：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_154112.png",alt:"image_20220719_154112"}})]),s._v(" "),t("p",[s._v("其中的389fe那次是当前远程分支的ID，我们可以执行如下命令，与远程对齐：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hard")]),s._v(" origin/main    \nHEAD is now at 389fe7b fix: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" bug "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#23)")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这样本地与远程就实现了对齐，在下次重新切分支，然后提交PR的时候，就不会出现上边那种，带了"),t("code",[s._v("几次Merge")]),s._v("的情况了。")]),s._v(" "),t("p",[s._v("图示如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_154244.png",alt:"image_20220719_154244"}})]),s._v(" "),t("p",[s._v("理论上这次只有一个提交，而不应该出现3个"),t("code",[s._v("commit")]),s._v("，就是这个原因。")])])}),[],!1,null,null,null);t.default=_.exports}}]);