(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{504:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("日常开发过程中，不论是哪个语言，一定都会有相对应的语法检测工具或者手段来辅助我们检查出编码过程中的一些遗漏或疏忽。但有时候会有一个尴尬的情况就是，把检测的方式配置上去了，却没有运行，最后成了摆设。")]),t._v(" "),a("p",[t._v("今天来介绍一个工具，能够完成在代码提交之前运行指定检测，从而实现代码的自检。")]),t._v(" "),a("ul",[a("li",[t._v("项目："),a("a",{attrs:{href:"https://github.com/pre-commit/pre-commit",target:"_blank",rel:"noopener noreferrer"}},[t._v("pre-commit"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("官网： "),a("a",{attrs:{href:"https://pre-commit.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pre-commit.com/"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("开箱即用："),a("a",{attrs:{href:"https://github.com/pre-commit/pre-commit-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("pre-commit-hooks"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("pre-commit 的运行机制借助于 git hook 来完成提交之前的一些预定义指令的运行，来达到提交前检测的目的。")]),t._v(" "),a("h2",{attrs:{id:"关于git-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于git-hook"}},[t._v("#")]),t._v(" 关于git hook")]),t._v(" "),a("p",[t._v("Git 能在特定的重要动作发生时触发自定义脚本钩子。钩子分为两组：")]),t._v(" "),a("ul",[a("li",[t._v("客户端钩子："),a("code",[t._v("pre-commit")]),t._v(", "),a("code",[t._v("prepare-commit-msg")]),t._v(", "),a("code",[t._v("commit-msg")]),t._v(", "),a("code",[t._v("post-commit")]),t._v(" 等，主要在服务端接收提交对象时、推送到服务器之前调用。")]),t._v(" "),a("li",[t._v("服务器钩子："),a("code",[t._v("pre-receive")]),t._v(", "),a("code",[t._v("post-receive")]),t._v(", "),a("code",[t._v("update")]),t._v(" 等，主要在服务端接收提交对象时、推送到服务器之前调用。")])]),t._v(" "),a("p",[t._v("git hooks 位置位于每个 git 项目下的 "),a("code",[t._v(".git/hooks")]),t._v(" 目录里，进去后会看到这些钩子的官方示例，都是以 "),a("code",[t._v(".sample")]),t._v(" 结尾的文件，这些示例脚本是不会执行的，去掉 "),a("code",[t._v(".sample")]),t._v(" 后缀可激活该钩子脚本。")]),t._v(" "),a("blockquote",[a("p",[t._v("PS：GIt hooks 的每个钩子的作用和说明，详细的以官方文档为准： https://git-scm.com/docs/githooks")])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://t.eryajf.net/imgs/2023/02/b521f43dba90f43b.jpg",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"安装体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装体验"}},[t._v("#")]),t._v(" 安装体验")]),t._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("pre-commit 是一个 Python 语言写的工具，通过如下命令能够轻松安装该工具：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pre-commit\n")])])]),a("p",[t._v("查看版本：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ pre-commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("\npre-commit "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.1")]),t._v(".0\n")])])]),a("p",[t._v("如果这条命令运行没有问题，则说明安装成功。")]),t._v(" "),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("现在我拿 "),a("a",{attrs:{href:"https://github.com/eryajf/learn-github",target:"_blank",rel:"noopener noreferrer"}},[t._v("learn-github"),a("OutboundLink")],1),t._v(" 项目来作为示例进行体验。")]),t._v(" "),a("p",[t._v("pre-commit 以 "),a("code",[t._v(".pre-commit-config.yaml")]),t._v(" 文件作为默认的配置文件，在项目根目录执行如下命令生成简单的配置内容：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ pre-commit sample-config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" .pre-commit-config.yaml\n")])])]),a("p",[t._v("查看一下配置文件的内容信息：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" .pre-commit-config.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# See https://pre-commit.com for more information")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# See https://pre-commit.com/hooks.html for more hooks")]),t._v("\nrepos:\n-   repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: v4.4.0\n    hooks:\n    -   id: trailing-whitespace\n    -   id: end-of-file-fixer\n    -   id: check-yaml\n    -   id: check-added-large-files\n")])])]),a("ul",[a("li",[t._v("repos：表示一系列仓库的映射。\n"),a("ul",[a("li",[t._v("repo：表示接下来使用的 hooks 脚本从哪个仓库进行拉取。")]),t._v(" "),a("li",[t._v("rev：指定将要拉取的 tag 。")]),t._v(" "),a("li",[t._v("hooks：钩子脚本列表，这些脚本来自于 repo 定义的仓库中。\n"),a("ul",[a("li",[t._v("id：指定将要应用的钩子的名称，就是对应的文件名。")])])])])])]),t._v(" "),a("p",[t._v("其中 hooks 还有更加丰富的配置信息，这里暂不展开，随后再进行完整介绍。")]),t._v(" "),a("p",[t._v("简单解释下如上配置文件的意思：在代码提交之前，会运行 hooks 列表中的这些检查，这些脚本来自于 "),a("code",[t._v("https://github.com/pre-commit/pre-commit-hooks")]),t._v(" 这个仓库的 "),a("code",[t._v("v4.4.0")]),t._v("。四个检查脚本的含义如下：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("trailing-whitespace")]),t._v(" ：检查修建行尾的空格")]),t._v(" "),a("li",[a("code",[t._v("end-of-file-fixer")]),t._v(" ：确保文件以换行符结尾且仅以换行符结尾。")]),t._v(" "),a("li",[a("code",[t._v("check-yaml")]),t._v(" ：检查 yaml 文件的语法。")]),t._v(" "),a("li",[a("code",[t._v("check-added-large-files")]),t._v(" ：防止提交大文件。(默认检测阈值为 500KB)")])]),t._v(" "),a("h3",{attrs:{id:"运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[t._v("#")]),t._v(" 运行")]),t._v(" "),a("p",[t._v("执行 "),a("code",[t._v("pre-commit run --all-files")]),t._v(" 命令，可以手动运行 pre-commit 的检查：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ pre-commit run --all-files\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Initializing environment "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" https://github.com/pre-commit/pre-commit-hooks.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Installing environment "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" https://github.com/pre-commit/pre-commit-hooks.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Once installed this environment will be reused.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" This may take a few minutes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nTrim Trailing Whitespace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Passed\nFix End of Files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Failed\n- hook id: end-of-file-fixer\n- "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" code: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n- files were modified by this hook\n\nFixing workflows-tested/rss.yml\n\nCheck Yaml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Passed\nCheck "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" added large files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("Passed\n")])])]),a("p",[a("code",[t._v("📢注意：")]),t._v(" 钩子添加完毕之后，默认情况下，pre-commit 只会检测当次变更了的文件，因此一般建议在添加之后，运行一次针对项目的全面检测。")]),t._v(" "),a("p",[t._v("如上内容表示运行 "),a("code",[t._v("Fix End of Files")]),t._v(" 这个脚本的时候发现有不符合检测规范的内容，然后自动 fix 掉了，这些检测脚本都是根据个人需求按需加载，因此这里我就把这个脚本去掉了。")]),t._v(" "),a("h3",{attrs:{id:"安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("上边是手动运行的，我们还应该运行一下安装命令，把 pre-commit 的配置文件加载到 git hooks 当中：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ pre-commit "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\npre-commit installed at .git/hooks/pre-commit\n")])])]),a("p",[t._v("这个时候，再次运行常规的提交步骤就会触发检测了：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ gcmsg "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'添加pre commit'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Initializing environment "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" https://github.com/pre-commit/pre-commit-hooks.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Installing environment "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" https://github.com/pre-commit/pre-commit-hooks.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Once installed this environment will be reused.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("INFO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" This may take a few minutes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\ntrim trailing whitespace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Passed\ncheck yaml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Passed\ncheck "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" added large files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("Passed\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("main aeb4728"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 添加pre commit\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" changed, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),t._v(" insertions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n create mode "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100644")]),t._v(" .pre-commit-config.yaml\n")])])]),a("h2",{attrs:{id:"go-项目实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#go-项目实践"}},[t._v("#")]),t._v(" Go 项目实践")]),t._v(" "),a("p",[t._v("以上内容介绍了 pre-commit 的简单配置以及使用，接下来我们测试一个 go 项目的实践。")]),t._v(" "),a("p",[t._v("然后在项目根目录添加如下配置文件 "),a("code",[t._v(".pre-commit-config.yaml")]),t._v(" ：")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//github.com/pre"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("commit/pre"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("commit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("hooks\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v4.4.0\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" check"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("yaml\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" trailing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("whitespace\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" check"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("added"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("large"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("files\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//github.com/golangci/golangci"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lint "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# golangci-lint hook repo")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1.47.3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# golangci-lint hook repo revision")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hooks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" golangci"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lint\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" golangci"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lint\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Fast linters runner for Go.\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" golangci"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lint run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("fix\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("types")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("go"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" golang\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pass_filenames")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n")])])]),a("p",[t._v("然后运行如下命令将 hooks 载入到 git 配置文件中：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ pre-commit "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\npre-commit installed at .git/hooks/pre-commit\n")])])]),a("p",[t._v("然后将代码某处的 err 错误忽略不做处理，此时提交代码看看是否会检查：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ gcmsg "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test pre check'")]),t._v("\nCheck Yaml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Passed\nTrim Trailing Whitespace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".Passed\nCheck "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" added large files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("Passed\ngolangci-lint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("Failed\n- hook id: golangci-lint\n- "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" code: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\nconfig/config.go:30:11: ineffectual assignment to err "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ineffassign"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        workDir, err :"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os.Getwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                 ^\n")])])]),a("p",[t._v("如此就实现了一个简单的提交前的 lint 检查，一些简单的语法问题就能在这里抛出来了。")]),t._v(" "),a("p",[t._v("其他语言同理，pre-commit 官方提供了大量检测脚本集成，各语言都有，大家可按需进行了解使用。")]),t._v(" "),a("h2",{attrs:{id:"补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[t._v("#")]),t._v(" 补充")]),t._v(" "),a("h3",{attrs:{id:"hooks-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-配置文件"}},[t._v("#")]),t._v(" hooks 配置文件")]),t._v(" "),a("p",[t._v("内容摘自官方文档：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-id",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("id")]),a("OutboundLink")],1)]),t._v(" "),a("th",[t._v("钩子的 id - 在 pre-commit-config.yaml 中使用。")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-name",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("name")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("挂钩的名称 - 在挂钩执行期间显示。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-entry",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("entry")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("入口点 - 要运行的可执行文件。 "),a("code",[t._v("entry")]),t._v(" 还可以包含不会被覆盖的参数，例如 "),a("code",[t._v("entry: autopep8 -i")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-language",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("language")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("钩子的语言 - 告诉预提交如何安装钩子。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-files",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("files")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("''")]),t._v("）要运行的文件模式。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-exclude",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("exclude")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("^$")]),t._v("）排除匹配的文件 "),a("a",{attrs:{href:"https://pre-commit.com/#hooks-files",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("files")]),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-types",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("types")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("[file]")]),t._v("）要运行的文件类型列表（AND）。请参阅 "),a("a",{attrs:{href:"https://pre-commit.com/#filtering-files-with-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用类型过滤文件"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-types_or",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("types_or")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("[]")]),t._v("）要运行的文件类型列表（或）。请参阅 "),a("a",{attrs:{href:"https://pre-commit.com/#filtering-files-with-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用类型过滤文件"),a("OutboundLink")],1),t._v("。 "),a("em",[t._v("2.9.0 中的新功能")]),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-exclude_types",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("exclude_types")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("[]")]),t._v("）要排除的文件模式。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-always_run",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("always_run")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("false")]),t._v("）即使 "),a("code",[t._v("true")]),t._v(" 没有匹配的文件，这个钩子也会运行。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-fail_fast",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("fail_fast")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("false")]),t._v("）如果 "),a("code",[t._v("true")]),t._v(" 此挂钩失败，预提交将停止运行挂钩。 "),a("em",[t._v("2.16.0 中的新功能")]),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-verbose",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("verbose")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("false")]),t._v("）如果 "),a("code",[t._v("true")]),t._v("，即使挂钩通过，也强制打印挂钩的输出。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-pass_filenames",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("pass_filenames")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("true")]),t._v("）如果 "),a("code",[t._v("false")]),t._v(" 没有文件名将传递给挂钩。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-require_serial",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("require_serial")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("false")]),t._v("）如果 "),a("code",[t._v("true")]),t._v(" 这个钩子将使用单个进程而不是并行执行。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-description",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("description")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("''")]),t._v("）钩子的描述。仅用于元数据目的。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-language_version",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("language_version")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("default")]),t._v("）请参阅 "),a("a",{attrs:{href:"https://pre-commit.com/#overriding-language-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("覆盖语言版本"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-minimum_pre_commit_version",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("minimum_pre_commit_version")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("'0'")]),t._v("）允许一个人指示最低兼容的预提交版本。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-args",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("args")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认 "),a("code",[t._v("[]")]),t._v("）要传递给挂钩的附加参数列表。")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://pre-commit.com/#hooks-stages",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("stages")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("（可选：默认（所有阶段））将挂钩限制在 "),a("code",[t._v("commit")]),t._v("、"),a("code",[t._v("merge-commit")]),t._v("、 "),a("code",[t._v("push")]),t._v("、"),a("code",[t._v("prepare-commit-msg")]),t._v("、"),a("code",[t._v("commit-msg")]),t._v("、"),a("code",[t._v("post-checkout")]),t._v("、"),a("code",[t._v("post-commit")]),t._v("、 "),a("code",[t._v("post-merge")]),t._v("、"),a("code",[t._v("post-rewrite")]),t._v(" 和/或 "),a("code",[t._v("manual")]),t._v(" 阶段。请参阅 "),a("a",{attrs:{href:"https://pre-commit.com/#confining-hooks-to-run-at-certain-stages",target:"_blank",rel:"noopener noreferrer"}},[t._v("限制挂钩在特定阶段运行"),a("OutboundLink")],1),t._v("。")])])])]),t._v(" "),a("h3",{attrs:{id:"其他内容快链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他内容快链"}},[t._v("#")]),t._v(" 其他内容快链")]),t._v(" "),a("p",[t._v("大部分内容官方文档已经介绍的很好，这里不再重复介绍，把相关的内容快链如下：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://pre-commit.com/#automatically-enabling-pre-commit-on-repositories",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何设置默认启用"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://pre-commit.com/#supported-languages",target:"_blank",rel:"noopener noreferrer"}},[t._v("支持的语言"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://pre-commit.com/#filtering-files-with-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("按类型过滤文件"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://pre-commit.com/#badging-your-repository",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用徽标标记你的存储库"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://pre-commit.com/#github-actions-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("与 GitHub Action 的集成"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);