(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{500:function(t,a,s){"use strict";s.r(a);var e=s(2),_=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("当我们需要解决项目中的一个bug时，通常一个新的"),a("code",[t._v("PR")]),t._v("会伴随一个"),a("code",[t._v("issue")]),t._v("，本文将介绍仅需通过创建"),a("code",[t._v("PR")]),t._v("时一个操作，关联上"),a("code",[t._v("issue")]),t._v("，然后当"),a("code",[t._v("PR")]),t._v("被同意之后，对应关联的"),a("code",[t._v("issue")]),t._v("也将随之关闭。")]),t._v(" "),a("p",[t._v("同样，我先在示例项目中创建一个"),a("code",[t._v("issue")]),t._v("：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_145415.png",alt:"image_20220719_145415"}})]),t._v(" "),a("p",[t._v("这种时候，作为项目维护者，我们可以直接点击"),a("code",[t._v("Development")]),t._v("中的 "),a("code",[t._v("Create a branch")]),t._v(" 创建一个fix分支，这样会自动关联上这个"),a("code",[t._v("issue")]),t._v("，同理，当该fix分支创建的"),a("code",[t._v("PR")]),t._v("被合并之后，"),a("code",[t._v("issue")]),t._v("也会自动关闭。")]),t._v(" "),a("p",[t._v("不过这里不讲此种方案，大家有兴趣可以自行体验一番。")]),t._v(" "),a("p",[t._v("这里讲的是我们更常见的一种操作，在本地编辑器里，基于最新的"),a("code",[t._v("main分支")]),t._v("切出一个"),a("code",[t._v("fix")]),t._v("分支，如下：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout main\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" fix_testbug\n")])])]),a("p",[t._v("然后就是在"),a("code",[t._v("fix_testbug")]),t._v("分支上进行对应问题的修复，这块儿不对赘述。")]),t._v(" "),a("p",[t._v("当我们感觉修复没问题了，也进行过自测了，就可以将此临时分支进行提交：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fix: test bug"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push --set-upstream origin fix_testbug\n")])])]),a("p",[t._v("推到远程之后，我们来到GitHub页面中，此时可以看到GitHub会自动提示一个新的分支可以合并：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_150429.png",alt:"image_20220719_150429"}})]),t._v(" "),a("p",[t._v("可以直接点击"),a("code",[t._v("Compare & pull request")]),t._v("：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151051.png",alt:"image_20220719_151051"}})]),t._v(" "),a("p",[t._v("注意右侧"),a("code",[t._v("Development")]),t._v("中的说明，我们可以通过在说明中添加一些"),a("a",{attrs:{href:"https://docs.github.com/cn/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue",target:"_blank",rel:"noopener noreferrer"}},[t._v("关键字"),a("OutboundLink")],1),t._v("，从而对"),a("code",[t._v("issue")]),t._v("进行关联，并触发关闭。当然也可以先创建PR，然后再进行关联也可以：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151313.png",alt:"image_20220719_151313"}})]),t._v(" "),a("p",[t._v("完成关联的PR，可以看到有这样的状态显示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151423.png",alt:"image_20220719_151423"}})]),t._v(" "),a("p",[t._v("这个时候，我们点击到"),a("code",[t._v("#21")]),t._v("号"),a("code",[t._v("issue")]),t._v("中，也可以看到被关联到该"),a("code",[t._v("PR")]),t._v("上了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151547.png",alt:"image_20220719_151547"}})]),t._v(" "),a("p",[t._v("现在我们将 "),a("code",[t._v("#23")]),t._v(" 号"),a("code",[t._v("PR")]),t._v("进行合并，合并之后可以看到关联的"),a("code",[t._v("issue")]),t._v("也被关闭了，此次关联的临时分支也被删除了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_151825.png",alt:"image_20220719_151825"}})]),t._v(" "),a("p",[t._v("以上就是项目协同中，"),a("code",[t._v("PR")]),t._v("与"),a("code",[t._v("issue")]),t._v("的联动维护。")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("另外：")]),t._v(" 这里插一个小点，当我们完成一次PR流程之后，作为项目主维护人，通常会再次切回到main分支，然后将远程被合并到main分支的代码拉到本地：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout main\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n")])])]),a("p",[t._v("这样执行之后，会发现本地代码竟然已经超过远程分支了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_154112.png",alt:"image_20220719_154112"}})]),t._v(" "),a("p",[t._v("其中的389fe那次是当前远程分支的ID，我们可以执行如下命令，与远程对齐：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--hard")]),t._v(" origin/main\nHEAD is now at 389fe7b fix: "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" bug "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#23)")]),t._v("\n")])])]),a("p",[t._v("这样本地与远程就实现了对齐，在下次重新切分支，然后提交PR的时候，就不会出现上边那种，带了"),a("code",[t._v("几次Merge")]),t._v("的情况了。")]),t._v(" "),a("p",[t._v("图示如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220719_154244.png",alt:"image_20220719_154244"}})]),t._v(" "),a("p",[t._v("理论上这次只有一个提交，而不应该出现3个"),a("code",[t._v("commit")]),t._v("，就是这个原因。")])])}),[],!1,null,null,null);a.default=_.exports}}]);