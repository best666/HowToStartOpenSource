(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{527:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("我们作为协同者，可能会修改多次在同一个 PR 上，这个时候项目的 owner 可以选择压缩合并，不过作为协作者，我们应该有这种自觉，在认为代码没问题的时候，主动将多次提交合并为一次。")]),t._v(" "),a("p",[t._v("可以通过 rebase 进行合并，操作步骤如下，比如刚刚那次在协作者 lql95 的视角已经提交了两次，我们现在再进行一次提交：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test info'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" test.txt\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add test file'")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n")])])]),a("p",[t._v("这次提交之后，这个 PR 就有了三次提交，我们自己在本地做如下处理。")]),t._v(" "),a("p",[t._v("首先查看一下提交历史：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" log\ncommit 55e307a11369a3238d908344fea39b91d32d229f "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" main, origin/main, origin/HEAD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nAuthor: lql95 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("eryajf@gmail.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Tue May "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":21:10 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v(" +0800\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n\ncommit 0d61a99c31b2dced4fb9b1e1edfc74585571c909\nAuthor: lql95 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("eryajf@gmail.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Tue May "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":53:44 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v(" +0800\n\n    删除无用内容\n\ncommit 5c575c34b0351750510abef7ce6734b8914f951f\nAuthor: lql95 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("eryajf@gmail.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Tue May "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":44:39 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v(" +0800\n\n    以lql95的视角协同维护项目\n\ncommit 421212d25e6062dc0d15173304762056dbb3e583\nMerge: 85630a4 c2cf945\nAuthor: 二丫讲梵 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Linuxlql@163.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nDate:   Tue May "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(":29:58 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v(" +0800\n\n    Merge pull request "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1 from eryajf/test")]),t._v("\n")])])]),a("p",[t._v("比如这里要将最新的三次提交合并，可以运行如下命令：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" rebase "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("421212d"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -i后面的参数为最后一个不需要合并的Commit，这里为Commit 1")]),t._v("\n")])])]),a("p",[t._v("执行之后，将会进入一个交互界面，内容如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220718_172053.png",alt:"image_20220718_172053"}})]),t._v(" "),a("p",[t._v("我们把后两个 pick 改成 squash，改后如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220718_172104.png",alt:"image_20220718_172104"}})]),t._v(" "),a("p",[t._v("这里两个关键字的含义为：")]),t._v(" "),a("ul",[a("li",[t._v("pick 表示其他的提交将会合并到这一次提交上")]),t._v(" "),a("li",[t._v("squash 表示将对应标识的提交合并到 pick 选择的那次 commit 上。")])]),t._v(" "),a("p",[t._v("保存之后，进入一个新的交互页面，这个页面是填写提交信息的，可保持默认，然后保存，就合并成功了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220718_172112.png",alt:"image_20220718_172112"}})]),t._v(" "),a("p",[t._v("通过查看状态，也能看到此时的状态详情：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("* dc38fb2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HEAD -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 以lql95的视角协同维护项目\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" * 55e307a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("origin/main, origin/HEAD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" * 0d61a99 删除无用内容\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" * 5c575c3 以lql95的视角协同维护项目\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/\n*   421212d Merge pull request "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1 from eryajf/test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" * c2cf945 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/\n* 85630a4 Create README.md\n")])])]),a("p",[t._v("当然在 vscode 中也能够清晰地看到变化：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220718_172123.png",alt:"image_20220718_172123"}})]),t._v(" "),a("p",[t._v("最后将这次调整 push 到远程即可，因为这次的本地调整，导致本地落后于远程，所以需要进行强推：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" origin main\n")])])]),a("p",[t._v("此时再去到 eryajf 主视角看刚刚那次 PR，就可以看到提交次数只有一次了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220718_172134.png",alt:"image_20220718_172134"}})]),t._v(" "),a("p",[t._v("当然，这里主要是为了体验整个压缩提交的流程，实际上开发过程中，并不需要这步操作，项目的owner在处理PR的时候可以直接选择压缩合并，也就不会将多次提交合并上去了。")])])}),[],!1,null,null,null);a.default=n.exports}}]);